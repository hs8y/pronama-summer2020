(self.webpackChunkpronama_summer2020=self.webpackChunkpronama_summer2020||[]).push([[773],{937:(t,a,e)=>{"use strict";var n=e(538),r=e(629),i=e(66);const s={data:function(){return{}},created:function(){this.$store.commit("updateCharacter",this.characters[0])},computed:{app:function(){return this.$store.state.app},characters:function(){return this.$store.state.characters}},methods:{drawCanvas:function(){this.$refs.preview.drawCanvas(),this.$smoothScroll({scrollTo:this.$el,duration:200,offset:0,updateHistory:!1})}}};const c=(0,e(900).Z)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app"},[e("AppHeader"),t._v(" "),e("div",{staticClass:"app__body"},[e("b-container",[e("h1",{staticClass:"app__title"},[e("small",{staticClass:"app__title__prefix"},[t._v("#プロ生ちゃんプロコン")]),t._v("\n        絵日記ジェネレータ\n      ")])]),t._v(" "),e("div",{staticClass:"app__preview"},[e("b-container",[e("Preview",{ref:"preview"})],1)],1),t._v(" "),e("div",{staticClass:"app__editor"},[e("b-container",[e("Editor"),t._v(" "),e("div",{staticClass:"app__editor__submit"},[e("button",{staticClass:"btn btn-block btn-primary",attrs:{type:"button"},on:{click:t.drawCanvas}},[e("i",{staticClass:"fas fa-pen"}),t._v(" 生成\n          ")])])],1)],1)],1),t._v(" "),e("AppFooter")],1)}),[],!1,null,null,null).exports;var o=e(32),l=e(470);n.default.use(o.ZPm),n.default.use(r.ZP),n.default.use(i.Z);var u=e(471);u.keys().forEach((function(t){var a=u(t),e=t.split("/").pop().replace(/\.\w+$/,"");n.default.component(e,a.default)}));var d=new r.ZP.Store({state:{app:{name:"pronama-summer2020",image_path:"./images",character:{},character_type_index:0,background:"",comment:""},characters:[{name:"暮井 慧（プロ生ちゃん）",images:[{name:"表情A",file:"kei_01.png"},{name:"表情B",file:"kei_02.png"},{name:"表情C",file:"kei_03.png"},{name:"表情D",file:"kei_04.png"},{name:"表情E",file:"kei_05.png"}],copyright:"© 2019 合同会社プロ生"},{name:"戸増千由莉（とますちゆり）",images:[{name:"表情A",file:"chiyuri_01.png"},{name:"表情B",file:"chiyuri_02.png"},{name:"表情C",file:"chiyuri_03.png"},{name:"表情D",file:"chiyuri_04.png"},{name:"表情E",file:"chiyuri_05.png"}],copyright:"© 2019 合同会社プロ生"},{name:"フィネス・ヒルヴィレッジ（Finesse Hillvillage）",images:[{name:"表情A",file:"finesse_01.png"},{name:"表情B",file:"finesse_02.png"},{name:"表情C",file:"finesse_03.png"},{name:"表情D",file:"finesse_04.png"},{name:"表情E",file:"finesse_05.png"}],copyright:"© 2019 合同会社プロ生"}]},mutations:{updateCharacter:function(t,a){t.app.character=a},updateCharacterType:function(t,a){t.app.character_type_index=a},updateBackground:function(t,a){t.app.background=a},updateComment:function(t,a){t.app.comment=a}},getters:{imagePath:function(t){return function(a){return l.join(t.app.image_path,a)}},characterImage:function(t){var a=t.app.character_type_index,e=t.app.character.images[a].file;return l.join(t.app.image_path,e)}}});document.getElementById("app")&&new n.default({store:d,el:"#app",render:function(t){return t(c)}})},115:()=>{},168:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>r});const n={props:{characterImage:{type:String,default:""},backgroundImage:{type:String,default:""},comment:{type:String,default:""},downloadType:{type:String,default:"image/png"}},data:function(){return{is_loaded:!1,canvas_width:640,font_family:"APJapanesefont, Meiryo, sans-serif",default_comment:"<コメントを入力してください>"}},computed:{canvas_height:function(){return this.canvas_width*(9/16)},balloon_image:function(){return this.$store.getters.imagePath("/balloon.png")}},watch:{characterImage:function(){this.draw()},backgroundImage:function(){this.draw()},comment:function(){this.draw()}},methods:{draw:function(){var t=this,a=this.ctx;a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="#ffffff",a.fillRect(0,0,a.canvas.width,a.canvas.height);var e=this.characterImage,n=this.backgroundImage,r=this.comment;this.drawBackground(a,n,(function(){t.drawCharacter(a,e,(function(){t.drawBalloon(a,t.balloon_image,(function(){t.drawComment(a,r,(function(){var a="";n&&r.length>0&&(a=t.$refs.canvas.toDataURL(t.downloadType)),t.$emit("updateDownloadLink",a)}))}))}))}))},drawCharacter:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(a){var n=new Image;n.onload=function(){var a=.15*t.canvas.width,r=a,i=t.canvas.height-r-15;t.drawImage(n,0,0,n.width,n.height,15,i,a,r),e()},n.src=a}else e()},drawBalloon:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(a){var n=new Image;n.onload=function(){var a=.78*t.canvas.width,r=.15*t.canvas.width,i=.15*t.canvas.width+30,s=t.canvas.height-r-15;t.drawImage(n,0,0,n.width,n.height,i,s,a,r),e()},n.src=a}else e()},drawComment:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(a.length){var n=22,r=1.2,i=this.font_family,s=(t.canvas.width,.15*t.canvas.width),c=.15*t.canvas.width+60,o=t.canvas.height-s-15+10;t.font="".concat(n,"px ").concat(i),t.fillStyle="#212121",a.split("\n").map((function(a,e){var i=n;e>0&&(i+=n*r*e),t.fillText(a,c,o+i)})),e()}else e()},drawBackground:function(t,a){var e=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(a){var r=new Image;r.onload=function(){e.drawImageCentering(t,r),n()},r.src=a}else n()},drawImageCentering:function(t,a){var e=t.canvas.width,n=t.canvas.height,r=a.width,i=a.height,s=Math.min(e/r,n/i),c=r*s,o=i*s,l=1;c<e&&(l=e/c),Math.abs(l-1)<1e-14&&o<n&&(l=n/o);var u=r/((c*=l)/e),d=i/((o*=l)/n),_=.5*(r-u),p=.5*(i-d);_<0&&(_=0),p<0&&(p=0),u>r&&(u=r),d>i&&(d=i),t.drawImage(a,_,p,u,d,0,0,e,n)}},mounted:function(){this.ctx=this.$el.getContext("2d"),this.draw()}};const r=(0,e(900).Z)(n,(function(){var t=this,a=t.$createElement;return(t._self._c||a)("canvas",{ref:"canvas",attrs:{id:"canvas",width:t.canvas_width,height:t.canvas_height}})}),[],!1,null,"6efccaf3",null).exports},483:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>r});const n={};const r=(0,e(900).Z)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app_footer"},[e("b-container",[e("div",{staticClass:"app_footer__body"},[e("div",{staticClass:"app_footer__menu"},[e("ul",{staticClass:"app_footer__menu__list"},[e("li",{staticClass:"app_footer__menu__list__item"},[e("a",{attrs:{href:"https://twitter.com/hs8yjp",target:"_blank"}},[e("i",{staticClass:"fab fa-twitter"}),t._v(" お問い合わせ\n            ")])]),t._v(" "),e("li",{staticClass:"app_footer__menu__list__item"},[e("a",{attrs:{href:"https://github.com/hs8y/pronama-summer2020",target:"_blank"}},[e("i",{staticClass:"fab fa-github"}),t._v(" GitHub\n            ")])]),t._v(" "),e("li",{staticClass:"app_footer__menu__list__item"},[e("a",{attrs:{href:"https://pronama.jp/2020/07/31/petitcon-2020-summer/",target:"_blank"}},[t._v("\n              #プロ生ちゃんプロコン "),e("i",{staticClass:"fas fa-external-link-alt"})])])])])]),t._v(" "),e("div",{staticClass:"app_footer__copyright"},[t._v("\n      Copyright © 2020 hs8y.jp All Rights Reserved.\n    ")])])],1)}),[],!1,null,null,null).exports},557:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>r});const n={computed:{app:function(){return this.$store.state.app}}};const r=(0,e(900).Z)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"primary"}},[e("b-navbar-brand",[t._v(t._s(t.app.name))])],1)}),[],!1,null,null,null).exports},196:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>r});const n={data:function(){return{}},computed:{app:function(){return this.$store.state.app},characters:function(){return this.$store.state.characters},character_image:function(){return this.$store.getters.characterImage},selected_character:{get:function(){return this.app.character},set:function(t){this.$store.commit("updateCharacter",t)}},character_type_index:{get:function(){return this.app.character_type_index},set:function(t){this.$store.commit("updateCharacterType",t)}},background:{get:function(){return this.app.background},set:function(t){this.$store.commit("updateBackground",t)}},comment:{get:function(){return this.app.comment},set:function(t){this.$store.commit("updateComment",t)}}},methods:{onCommentChange:function(t){this.$store.commit("updateComment",t.target.value)},onCharacterChange:function(t){this.$store.commit("updateCharacter",this.selected_character),this.$store.commit("updateCharacterType",0)},onCharacterTypeChange:function(t){this.$store.commit("updateCharacterType",this.character_type_index)},onBackgroundChange:function(t){var a=t.target.files||t.dataTransfer.files;if(!a)return!1;this.setBackgroundImage(a[0])},resetBackground:function(){this.$store.commit("updateBackground","")},setBackgroundImage:function(t){var a=this;if(!t.type.startsWith("image/"))return!1;var e=new FileReader;e.onload=function(t){a.$store.commit("updateBackground",t.target.result)},e.readAsDataURL(t)}}};const r=(0,e(900).Z)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"editor"},[e("dl",{staticClass:"editor__table"},[e("div",{staticClass:"editor__table__row"},[e("dt",{staticClass:"editor__table__head"},[t._v("\n        画像\n      ")]),t._v(" "),e("dd",{staticClass:"editor__table__cell"},[e("div",{staticClass:"editor__profile"},[e("div",{staticClass:"editor__profile__preview"},[e("div",{staticClass:"editor__profile__preview__icon"},[e("img",{attrs:{src:t.character_image,alt:""}})]),t._v(" "),t.selected_character.copyright?e("div",{staticClass:"editor__profile__preview__copyright"},[t._v("\n              "+t._s(t.selected_character.copyright)+"\n            ")]):t._e()]),t._v(" "),e("div",{staticClass:"editor__profile__form"},[e("b-form-group",[e("label",{attrs:{for:"character"}},[t._v("キャラクター")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.selected_character,expression:"selected_character"}],staticClass:"form-control",attrs:{id:"character"},on:{change:[function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selected_character=a.target.multiple?e:e[0]},t.onCharacterChange]}},t._l(t.characters,(function(a){return e("option",{domProps:{value:a}},[t._v("\n                  "+t._s(a.name)+"\n                ")])})),0)]),t._v(" "),e("b-form-group",[e("div",{},t._l(t.selected_character.images,(function(a,n){return e("div",{staticClass:"form-check form-check-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.character_type_index,expression:"character_type_index"}],staticClass:"form-check-input",attrs:{type:"radio",id:"customCheck_"+n,name:"character_type"},domProps:{value:n,checked:t._q(t.character_type_index,n)},on:{change:function(a){t.character_type_index=n}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"customCheck_"+n}},[t._v(t._s(a.name))])])})),0)])],1)])])]),t._v(" "),e("div",{staticClass:"editor__table__row"},[e("dt",{staticClass:"editor__table__head"},[t._v("\n        背景画像\n      ")]),t._v(" "),e("dd",{staticClass:"editor__table__cell"},[e("div",{staticClass:"editor__background"},[t.background?e("div",[e("div",{staticClass:"editor__background__image"},[e("img",{attrs:{src:t.background,alt:""}}),t._v(" "),e("span",{staticClass:"editor__background__image__reset_btn",attrs:{title:"削除"},on:{click:function(a){return t.resetBackground()}}},[t._v("×")])])]):e("div",{staticClass:"custom-file"},[e("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"backgroundImage",accept:"image/*",required:""},on:{change:t.onBackgroundChange}}),t._v(" "),e("label",{staticClass:"custom-file-label",attrs:{for:"backgroundImage"}},[t._v("画像を選択してください")]),t._v(" "),t._m(0)])])])]),t._v(" "),e("div",{staticClass:"editor__table__row"},[e("dt",{staticClass:"editor__table__head"},[t._v("\n        コメント\n      ")]),t._v(" "),e("dd",{staticClass:"editor__table__cell"},[e("textarea",{staticClass:"form-control",attrs:{rows:"3"},on:{change:t.onCommentChange}}),t._v(" "),t._m(1)])])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-text small text-muted"},[e("i",{staticClass:"fas fa-info-circle"}),t._v(" 選択したファイルはオンラインにアップロードされないのでご安心ください！\n            ")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-text small text-muted"},[e("i",{staticClass:"fas fa-info-circle"}),t._v(" 文字が突き抜けないようにうまく調整してね！\n        ")])}],!1,null,null,null).exports},430:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>r});const n={data:function(){return{download_link:"",download_type:"image/png"}},computed:{app:function(){return this.$store.state.app},characters:function(){return this.$store.state.characters},character_image:function(){return this.$store.getters.characterImage},selected_character:function(){return this.app.character},character_type_index:function(){return this.app.character_type_index},background:function(){return this.app.background},comment:function(){return this.app.comment},download_name:function(){var t="image/png"===this.download_type?"png":"jpg",a="image_".concat(this.now());return"".concat(a,".").concat(t)}},methods:{drawCanvas:function(){this.$refs.canvas.draw()},updateDownloadLink:function(t){this.download_link=t},now:function(){var t=this,a=new Date;return[a.getFullYear(),a.getMonth()+1,a.getDay(),a.getHours(),a.getMinutes(),a.getSeconds()].map((function(a){return t.zeroPadding(a)})).join("")},zeroPadding:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(t).length>=a?String(t):(String(0).repeat(a)+String(t)).slice(-1*a)}}};const r=(0,e(900).Z)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"preview"},[e("div",{staticClass:"preview__canvas_frame"},[e("AppCanvas",{ref:"canvas",staticClass:"preview__canvas",attrs:{"character-image":t.character_image,"background-image":t.background,comment:t.comment,"download-type":t.download_type},on:{updateDownloadLink:t.updateDownloadLink}})],1),t._v(" "),""!==t.download_link?e("div",{staticClass:"text-right my-1"},[e("a",{staticClass:"btn btn-primary",attrs:{href:t.download_link,download:t.download_name,target:"_blank"}},[e("i",{staticClass:"fas fa-file-download"}),t._v(" 画像をダウンロード\n    ")])]):t._e()])}),[],!1,null,null,null).exports},471:(t,a,e)=>{var n={"./AppCanvas.vue":168,"./AppFooter.vue":483,"./AppHeader.vue":557,"./Editor.vue":196,"./Preview.vue":430};function r(t){var a=i(t);return e(a)}function i(t){if(!e.o(n,t)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=i,t.exports=r,r.id=471}},t=>{var a=a=>t(t.s=a);t.O(0,[170,898],(()=>(a(937),a(115))));t.O()}]);